<?xml version="1.0" encoding="UTF-8"?>
<plugin:page xmlns="html5" xmlns:plugin="plugin" xmlns:c="core">
	<plugin:body>
		<c:if test="${not empty msg}">
			<c:if test="${msg.type eq 'info'}">
				<c:set var="wrapperClass" value="success" />
				<c:set var="msgIconClass" value="check-circle" />
			</c:if>
			<c:if test="${msg.type eq 'error'}">
				<c:set var="wrapperClass" value="danger" />
				<c:set var="msgIconClass" value="times-circle" />
			</c:if>
			<div style="margin: 10px 10px 2px;" class="alert alert-${wrapperClass}" role="alert">
				<span class="fa fa-${msgIconClass} fa-lg" style="margin-right: 0.5rem"></span>
				<c:out value="${msg.details}"/>
			</div>
		</c:if>
		
		<div style="padding: 10px;">
			<form name="deleteSites" method="POST" action="deleteSites">
				<table class="piston-table">
						<tr>
							<th>Select</th>
							<th>Name</th>
							<th>Title</th>
							<th>Mapping</th>
							<th>Actions</th>
						</tr>
						<c:iterate items="${sites}" var="site">
							<tr>
								<td style="text-align:center;">
									<checkbox property="siteIds" value="${site.id}" disabled="${!site.metadata.manageable}" />
								</td>
								<td><c:out value="${site.name}" /></td>
								<td><c:out value="${site.metadata.title}" /></td>
								<td><c:out value="${site.metadata.mapping}" /></td>
								<td>
									<plugin:actionURL action="siteDetails" title="Edit Site" class="img-btn" faClass="fa fa-pencil fa-lg" faStyle="font-size: 1.2em;">
										<plugin:param name="id" value="${site.id}" />
									</plugin:actionURL>
								</td>
							</tr>
						</c:iterate>
				</table>
				
				<p class="btn-bar">
					<pButton class="pt-btn pseudo-submit-button" faClass="fa fa-trash fa-lg" faStyle="font-size: 1.2em; padding-right: 6px;"> 
	  					<c:out value="Delete" />
	  				</pButton>
	  				<plugin:actionURL action="siteDetails" class="pt-btn" faClass="fa fa-plus fa-lg" faStyle="font-size: 1.2em; padding-right: 6px;">
						<c:out value="New Site" />
					</plugin:actionURL>
  				</p>
			</form>
		</div>
	</plugin:body>
</plugin:page>
